<HTML>
<HEAD>
<TITLE>
classmodelbuilder.cpp
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#include</font> <font color="maroon">"classmodelbuilder.h"</font>
<font color="blue">#include</font> <font color="maroon">"jniexception.h"</font>

<font color="blue">namespace</font> jni <font color="black">{</font>

  ClassModelBuilder<font color="black">:</font><font color="black">:</font>ClassModelBuilder<font color="black">(</font>JavaEnv <font color="black">*</font>e, QFile source<font color="black">)</font> <font color="black">{</font>
    <font color="blue">if</font> <font color="black">(</font>e <font color="black">=</font><font color="black">=</font> NULL<font color="black">)</font> <font color="black">{</font>
      <font color="blue">throw</font> jni_error<font color="black">(</font><font color="maroon">"NULL value for JavaEnv"</font><font color="black">)</font>;
    <font color="black">}</font>
    <font color="blue">if</font> <font color="black">(</font><font color="black">!</font>source.exists<font color="black">(</font><font color="black">)</font><font color="black">)</font> <font color="black">{</font>
      <font color="blue">throw</font> jni_error<font color="black">(</font><font color="maroon">"Source file does not exist"</font><font color="black">)</font>;
    <font color="black">}</font>
    <font color="blue">if</font> <font color="black">(</font><font color="black">!</font>source.isReadable<font color="black">(</font><font color="black">)</font><font color="black">)</font> <font color="black">{</font>
      <font color="blue">throw</font> jni_error<font color="black">(</font><font color="maroon">"Unreadable file"</font><font color="black">)</font>;
    <font color="black">}</font>

    env <font color="black">=</font> e;
    file <font color="black">=</font> source;
  <font color="black">}</font>

  QMap<font color="black">&#60;</font>QString, JNIClass<font color="black">*</font><font color="black">&#62;</font> ClassModelBuilder<font color="black">:</font><font color="black">:</font>ParseFile<font color="black">(</font><font color="black">)</font> <font color="black">{</font>
    <font color="blue">if</font> <font color="black">(</font><font color="black">!</font>file.isOpen<font color="black">(</font><font color="black">)</font><font color="black">)</font> <font color="black">{</font>
      file.open<font color="black">(</font>QIODevice<font color="black">:</font><font color="black">:</font>ReadOnly<font color="black">)</font>;
    <font color="black">}</font>
    qWarning<font color="black">(</font><font color="maroon">"Calling unimplemented function"</font><font color="black">)</font>;
    <font color="green">// implementation here depends on representation of data in input file</font>
    <font color="green">// AKA it is dependant on updater implementation</font>

    <font color="green">// TODO: create ParseFile() function based on updater output format</font>

    file.close<font color="black">(</font><font color="black">)</font>;

    <font color="blue">return</font> mappings;
  <font color="black">}</font>

<font color="black">}</font>

</PRE>
</BODY>
</HTML>
