<HTML>
<HEAD>
<TITLE>
jnivalue.h
</TITLE>
</HEAD>
<BODY>
<PRE>
<font color="blue">#ifndef</font> JNIVALUE_H
<font color="blue">#define</font> JNIVALUE_H

<font color="blue">#include</font> <font color="maroon">"jni.h"</font>
<font color="blue">#include</font> <font color="maroon">&#60;cstdlib&#62;</font>
<font color="blue">#include</font> <font color="maroon">&#60;QtCore&#62;</font>

<font color="blue">namespace</font> jni <font color="black">{</font>

  <font color="green">/**
   * @brief enum indicating a value type in the Java environment
   */</font>
  <font color="blue">enum</font> jvalue_type <font color="black">{</font>
    JVOID,JBOOLEAN,JBYTE,JCHAR,JSHORT,JINT,JLONG,JFLOAT,JDOUBLE,JOBJECT
  <font color="black">}</font>;

  <font color="green">/**
   * @brief Returns the name of the given @c jvalue_type as a QString
   */</font>
  QString GetJValueTypeName<font color="black">(</font>jvalue_type type<font color="black">)</font>;

  <font color="green">/**
   * @brief Wrapper class around jvalue
   * This class also contains its own type and allows for safe access of
   * values through the GetXXX member functions.
   */</font>
  <font color="blue">class</font> JNIValue <font color="black">:</font> <font color="blue">public</font> QObject <font color="black">{</font>
    <font color="blue">private</font><font color="black">:</font>
      jvalue value;
      jvalue_type type;
    <font color="blue">public</font><font color="black">:</font>
      <font color="green">/**
       * @brief Constructs a generic JNIValue
       * The type will be set to JVOID, and as such has no defined value
       */</font>
      JNIValue<font color="black">(</font><font color="black">)</font> <font color="black">{</font> type <font color="black">=</font> JVOID; setObjectName<font color="black">(</font>QStringLiteral<font color="black">(</font><font color="maroon">"null"</font><font color="black">)</font><font color="black">)</font>;<font color="black">}</font>

      JNIValue<font color="black">(</font><font color="blue">const</font> JNIValue<font color="black">&</font> v<font color="black">)</font> <font color="black">:</font> QObject<font color="black">(</font><font color="black">)</font> <font color="black">{</font>
        type <font color="black">=</font> v.type;
        value <font color="black">=</font> v.value;
      <font color="black">}</font>

      <font color="green">/**
       * @brief Creates a JNIValue based on the given jvalue and jvalue_type.
       * @param t the type of the jvalue
       * @param val the jvalue union containing the value
       */</font>
      JNIValue<font color="black">(</font>jvalue_type t, jvalue val<font color="black">)</font>;

      <font color="green">/**
       * @brief Creates a JOBJECT-type JNIValue with the specified value
       * @param o the jobject with the value
       */</font>
      JNIValue<font color="black">(</font>jobject o<font color="black">)</font>;
      <font color="green">/**
       * @brief Creates a JBOOLEAN-type JNIValue with the specified value
       * @param z the jboolean with the value
       */</font>
      JNIValue<font color="black">(</font>jboolean z<font color="black">)</font>;
      <font color="green">/**
       * @brief Creates a JBYTE-type JNIValue with the specified value
       * @param b the jbyte with the value
       */</font>
      JNIValue<font color="black">(</font>jbyte b<font color="black">)</font>;
      <font color="green">/**
       * @brief Creates a JSHORT-type JNIValue with the specified value
       * @param s the jshort with the value
       */</font>
      JNIValue<font color="black">(</font>jshort s<font color="black">)</font>;
      <font color="green">/**
       * @brief Creates a JCHAR-type JNIValue with the specified value
       * @param c the jchar with the value
       */</font>
      JNIValue<font color="black">(</font>jchar c<font color="black">)</font>;
      <font color="green">/**
       * @brief Creates a JINT-type JNIValue with the specified value
       * @param i the jint with the value
       */</font>
      JNIValue<font color="black">(</font>jint i<font color="black">)</font>;
      <font color="green">/**
       * @brief Creates a JDOUBLE-type JNIValue with the specified value
       * @param d the jdouble with the value
       */</font>
      JNIValue<font color="black">(</font>jdouble d<font color="black">)</font>;
      <font color="green">/**
       * @brief Creates a JFLOAT-type JNIValue with the specified value
       * @param f the jfloat with the value
       */</font>
      JNIValue<font color="black">(</font>jfloat f<font color="black">)</font>;
      <font color="green">/**
       * @brief Creates a JLONG-type JNIValue with the specified value
       * @param l the jlong with the value
       */</font>
      JNIValue<font color="black">(</font>jlong l<font color="black">)</font>;

      <font color="green">/**
       * @brief Compares this JNIValue to another
       * @param v the value to compare with
       * @return true if this JNIValue is equal to the other value, false otherwise.
       */</font>
      jboolean <font color="blue">operator</font><font color="black">=</font><font color="black">=</font> <font color="black">(</font>JNIValue v<font color="black">)</font>;

      <font color="green">/**
       * @brief Returns whether this JNIValue represents the NULL value
       * @return true if and only if this JNIValue is of the JOBJECT type and the
       *         value of this JNIValue is NULL, or when the type is JVOID. false otherwise.
       */</font>
      jboolean IsNull<font color="black">(</font><font color="black">)</font> <font color="black">{</font> <font color="blue">return</font> type <font color="black">=</font><font color="black">=</font> JVOID <font color="black">|</font><font color="black">|</font> <font color="black">(</font>type <font color="black">=</font><font color="black">=</font> JOBJECT <font color="black">&</font><font color="black">&</font> value.l <font color="black">=</font><font color="black">=</font> NULL<font color="black">)</font>; <font color="black">}</font>

      <font color="green">/**
       * @brief Returns the type of this JNIValue
       * @return the type of this JNIValue
       */</font>
      jvalue_type GetType<font color="black">(</font><font color="black">)</font> <font color="black">{</font> <font color="blue">return</font> type; <font color="black">}</font>
      <font color="green">/**
       * @brief Returns the jvalue belonging to this JNIValue
       *
       * This throws an jni_error when this JNIValue's type is JVOID
       * @return the jvalue of this JNIValue
       */</font>
      jvalue Get<font color="black">(</font><font color="black">)</font> <font color="black">{</font> <font color="blue">return</font> value; <font color="black">}</font>

      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jboolean.
       * @throws runtime_error when the value does not have the required type
       * @return the jboolean value of this JNIValue
       */</font>
      jboolean GetBoolean<font color="black">(</font><font color="black">)</font>;
      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jshort.
       * @throws runtime_error when the value does not have the required type
       * @return the jshort value of this JNIValue
       */</font>
      jshort GetShort<font color="black">(</font><font color="black">)</font>;
      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jbyte.
       * @throws runtime_error when the value does not have the required type
       * @return the jbyte value of this JNIValue
       */</font>
      jbyte GetByte<font color="black">(</font><font color="black">)</font>;
      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jchar.
       * @throws runtime_error when the value does not have the required type
       * @return the jchar value of this JNIValue
       */</font>
      jchar GetChar<font color="black">(</font><font color="black">)</font>;
      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jint.
       * @throws runtime_error when the value does not have the required type
       * @return the jint value of this JNIValue
       */</font>
      jint GetInt<font color="black">(</font><font color="black">)</font>;
      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jobject.
       * @throws runtime_error when the value does not have the required type
       * @return the jobject value of this JNIValue
       */</font>
      virtual jobject GetJObject<font color="black">(</font><font color="black">)</font>;
      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jlong.
       * @throws runtime_error when the value does not have the required type
       * @return the jlong value of this JNIValue
       */</font>
      jlong GetLong<font color="black">(</font><font color="black">)</font>;
      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jdouble.
       * @throws runtime_error when the value does not have the required type
       * @return the jdouble value of this JNIValue
       */</font>
      jdouble GetDouble<font color="black">(</font><font color="black">)</font>;
      <font color="green">/**
       * @brief Returns the value of this JNIValue as a jfloat.
       * @throws runtime_error when the value does not have the required type
       * @return the jfloat value of this JNIValue
       */</font>
      jfloat GetFloat<font color="black">(</font><font color="black">)</font>;
  <font color="black">}</font>;
<font color="black">}</font>

<font color="blue">#endif</font> <font color="green">// JNIVALUE_H</font>

</PRE>
</BODY>
</HTML>
